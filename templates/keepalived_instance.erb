vrrp_instance <%=  @name %> {
  virtual_router_id <%= @name %>

  # for electing MASTER, highest priority wins.
  priority  <%= @priority %>
  state     <%= @state %>

  interface <%= @interface %>

  virtual_ipaddress {
    <% if @virtual_ips.is_a? Hash then %>
        <% @virtual_ips.each do |vip, label| -%>
            <%= vip -%> label <%= @interface -%>:<%= label %>
        <% end %>
    <% else %>
        <% @virtual_ips.each do |vip| -%>
            <%= vip -%>
        <% end %>
    <% end %>
  }

  <% if @notify then -%>notify <%= @notify %><% end %>
  <% if @notify_master then -%>notify_master <%= @notify_master %><% end %>
  <% if @notify_backup then -%>notify_backup <%= @notify_backup %><% end %>

  <% if @smtp_alert then -%>smtp_alert<% end %>
}
